<footer class="admin-footer">
    <div class="container">
        <p>&copy; 2025 Franchini - Tous droits réservés</p>
        <p>Version 1.0.0</p>
    </div>
</footer>

<!-- Scripts communs -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="js/admin-common.js"></script>

<!-- Script pour inclure les fichiers HTML -->
<script>
    // Fonction pour inclure le contenu des fichiers HTML
    function includeHTML() {
        console.log('[includeHTML] Début de l\'inclusion des fichiers HTML');
        const elements = document.querySelectorAll('[data-include]');
        
        console.log(`[includeHTML] ${elements.length} éléments à inclure`);
        
        elements.forEach((element, index) => {
            const file = element.getAttribute('data-include');
            console.log(`[includeHTML] Traitement de l'élément ${index + 1}: ${file}`);
            
            if (file) {
                console.log(`[includeHTML] Chargement du fichier: ${file}`);
                fetch(file)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`Erreur HTTP: ${response.status} ${response.statusText}`);
                        }
                        return response.text();
                    })
                    .then(content => {
                        console.log(`[includeHTML] Fichier chargé avec succès: ${file} (${content.length} octets)`);
                        element.outerHTML = content;
                        console.log(`[includeHTML] Contenu inséré pour: ${file}`);
                        
                        // Réinitialiser les écouteurs d'événements si nécessaire
                        if (typeof initPage === 'function') {
                            console.log(`[includeHTML] Appel de initPage() après chargement de ${file}`);
                            initPage();
                        } else {
                            console.log(`[includeHTML] La fonction initPage() n'est pas définie`);
                        }
                    })
                    .catch(error => {
                        console.error(`[includeHTML] Erreur lors du chargement de ${file}:`, error);
                    });
            } else {
                console.warn(`[includeHTML] Aucun fichier spécifié pour l'élément`, element);
            }
        });
        
        console.log('[includeHTML] Fin de l\'inclusion des fichiers HTML');
    }
    
    // Appeler la fonction d'inclusion lorsque le DOM est chargé
    console.log('admin-footer.js: Ajout du gestionnaire d\'événement DOMContentLoaded');
    document.addEventListener('DOMContentLoaded', function() {
        console.log('admin-footer.js: Événement DOMContentLoaded déclenché');
        includeHTML();
    });
    
    // Vérifier si le DOM est déjà chargé
    if (document.readyState === 'loading') {
        console.log('admin-footer.js: Le document est en cours de chargement');
    } else {
        console.log('admin-footer.js: Le document est déjà chargé, appel immédiat de includeHTML()');
        includeHTML();
    }
</script>
